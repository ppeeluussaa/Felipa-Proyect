<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Reservar turno - Felipa</title>
<link rel="stylesheet" href="css/style.css" />
<style>
/* ==========================
   CALENDARIO PROFESIONAL
========================== */
.calendar {
  max-width: 900px;
  margin: 30px auto;
  background-color: #fffaf0;
  border: 2px solid #f1e4d3;
  border-radius: 10px;
  padding: 20px;
}

.calendar h2 {
  text-align: center;
  color: #bfa66a;
  margin-bottom: 20px;
}

.weekdays, .days {
  display: grid;
  grid-template-columns: repeat(7, 1fr);
  gap: 5px;
}

.weekdays div {
  font-weight: bold;
  text-align: center;
  color: #bfa66a;
}

.day {
  background-color: #fff;
  border: 1px solid #f1e4d3;
  border-radius: 6px;
  padding: 8px;
  min-height: 120px;
  display: flex;
  flex-direction: column;
  align-items: center;
}

.day.disabled {
  background-color: #f5f5f5;
  color: #ccc;
}

.day h4 {
  margin-bottom: 5px;
  font-size: 0.9rem;
}

.horarios button {
  margin: 2px;
  padding: 5px 8px;
  font-size: 0.8rem;
  border: none;
  border-radius: 5px;
  cursor: pointer;
  background-color: #bfa66a;
  color: #fff;
  transition: background 0.2s;
}

.horarios button:hover {
  background-color: #a38f55;
}

.horarios button.reservado {
  background-color: #e4d8b0;
  color: #999;
  cursor: default;
}

.mensajeReserva {
  text-align: center;
  margin-top: 15px;
  font-weight: bold;
  color: green;
}

@media(max-width: 700px) {
  .day {
    min-height: 100px;
  }

  .horarios button {
    padding: 4px 6px;
    font-size: 0.7rem;
  }
}
</style>
</head>
<body>
<header class="navbar">
  <div class="logo" onclick="window.location.href='index.html'">
    <img src="imagenes/logo-felipa.jpg" alt="Felipa Logo" class="logo-img" />
    <span>Felipa</span>
  </div>
  <nav>
    <a href="index.html">Inicio</a>
    <a href="reservar.html" class="active">Reservar</a>
    <a href="login.html">Iniciar sesión</a>
  </nav>
</header>

<section class="calendar">
  <h2>Reservá tu turno - <span id="mesActual"></span></h2>
  <div class="weekdays">
    <div>Lun</div>
    <div>Mar</div>
    <div>Mié</div>
    <div>Jue</div>
    <div>Vie</div>
    <div>Sáb</div>
    <div>Dom</div>
  </div>
  <div class="days" id="diasMes"></div>
  <div class="mensajeReserva" id="mensajeReserva"></div>
</section>

<script>
const diasMesContainer = document.getElementById("diasMes");
const mensajeReserva = document.getElementById("mensajeReserva");
const mesActualSpan = document.getElementById("mesActual");

const horariosDisponibles = ["08:00", "10:00", "14:00", "17:00", "19:00"];
const fechaHoy = new Date();
const año = fechaHoy.getFullYear();
const mes = fechaHoy.getMonth();
const nombreMeses = ["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"];
mesActualSpan.textContent = nombreMeses[mes] + " " + año;

// Función para obtener el primer día del mes y cantidad de días
const primerDiaMes = new Date(año, mes, 1).getDay(); // 0=Domingo, 1=Lunes...
const cantidadDiasMes = new Date(año, mes + 1, 0).getDate();

for (let i = 1; i <= cantidadDiasMes; i++) {
  const diaDiv = document.createElement("div");
  diaDiv.classList.add("day");
  // Ajuste para que la semana empiece en lunes
  const diaSemana = (new Date(año, mes, i).getDay() + 6) % 7;
  if(i === 1) diaDiv.style.gridColumnStart = diaSemana + 1;

  const fecha = new Date(año, mes, i);
  if(fecha < fechaHoy) {
    diaDiv.classList.add("disabled");
  }

  const h4 = document.createElement("h4");
  h4.textContent = i;
  diaDiv.appendChild(h4);

  const horariosDiv = document.createElement("div");
  horariosDiv.classList.add("horarios");

  if(!diaDiv.classList.contains("disabled")) {
    horariosDisponibles.forEach(hora => {
      const btn = document.createElement("button");
      btn.textContent = hora;
      btn.addEventListener("click", () => {
        btn.classList.add("reservado");
        btn.disabled = true;
        mensajeReserva.textContent = `✅ Turno reservado para ${i}/${mes+1} a las ${hora}`;
      });
      horariosDiv.appendChild(btn);
    });
  }

  diaDiv.appendChild(horariosDiv);
  diasMesContainer.appendChild(diaDiv);
}
</script>
</body>
</html>
